<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>astrothesis - forum</title>
  <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Text&family=Yeseva+One&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Yeseva One', serif;
      background: #fef9f4;
      color: black;
      padding: 2rem;
    }
    nav {
      width: 100%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 2rem;
      background: rgba(255,255,255,0.9);
      position: fixed;
      top: 0;
      left: 0;
      z-index: 10;
    }
    nav .logo {
      font-family: 'DM Serif Text', serif;
      font-size: 1.5rem;
      color: black;
    }
    nav ul {
      list-style: none;
      display: flex;
      gap: 1.5rem;
    }
    nav a {
      text-decoration: none;
      font-size: 1rem;
      color: black;
      transition: color 0.3s;
    }
    nav a:hover { color: #ff6d4d; }
    .forum-container {
      max-width: 900px;
      margin: 6rem auto 2rem auto;
      text-align: center;
    }
    .post-card {
      background: #fff;
      padding: 1rem;
      margin-bottom: 1.5rem;
      border-radius: 8px;
      text-align: left;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .post-card h3 { font-family: 'DM Serif Text', serif; margin-bottom: 0.5rem; }
    .post-card p { margin-bottom: 0.5rem; }
    .post-actions { margin-top: 0.5rem; }
    .post-actions button { margin-right: 0.5rem; cursor: pointer; background:#ff6d4d; color:white; border:none; padding:0.3rem 0.7rem; border-radius:4px; }
    .reply-box textarea { width: 100%; margin-top:0.5rem; }
    .reply-box button { margin-top:0.3rem; background:#ff6d4d; color:white; border:none; padding:0.3rem 0.7rem; cursor:pointer; border-radius:4px; }
    /* Login modal */
    #loginModal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); justify-content:center; align-items:center; }
    #loginModal > div { background:#fff; padding:2rem; border-radius:8px; width:300px; text-align:center; }
    #loginModal input { width:100%; margin:0.5rem 0; padding:0.5rem; }
    #loginModal button { margin-top:1rem; background:#ff6d4d; color:#fff; border:none; padding:0.5rem 1rem; cursor:pointer; }
  </style>
</head>
<body>
  <nav>
    <div class="logo">astrothesis</div>
    <ul>
      <li><a href="index.html">home</a></li>
      <li><a href="about.html">about</a></li>
      <li><a href="contact.html">contact</a></li>
      <li><a href="blog.html">blog</a></li>
      <li><a href="forum.html">forum</a></li>
    </ul>
  </nav>

  <!-- Login Modal -->
  <div id="loginModal">
    <div>
      <h2>Login</h2>
      <input id="username" type="text" placeholder="Username">
      <input id="password" type="password" placeholder="Password">
      <button id="loginBtn">Login</button>
    </div>
  </div>

  <div class="forum-container" id="forumContainer">
    <h1>General Forum</h1>
    <!-- Posts will be dynamically added here -->
  </div>

  <script>
    let loggedIn = false;

    function showLogin() {
      document.getElementById('loginModal').style.display = 'flex';
    }

    document.getElementById('loginBtn').addEventListener('click', () => {
      const user = document.getElementById('username').value.trim();
      const pass = document.getElementById('password').value.trim();
      if(user && pass){
        loggedIn = true;
        document.getElementById('loginModal').style.display = 'none';
        alert('Logged in successfully! You can now post and reply.');
      } else {
        alert('Please enter username and password.');
      }
    });

    // Post data storage
    let posts = JSON.parse(localStorage.getItem('forumPosts')) || [
      { id:1, title:"What's Brewing?", date:"August 22, 2025", content:"Exciting topics coming soon!", likes:0, replies:[] },
      { id:2, title:"", date:"", content:"", likes:0, replies:[] },
      { id:3, title:"", date:"", content:"", likes:0, replies:[] }
    ];

    function savePosts() { localStorage.setItem('forumPosts', JSON.stringify(posts)); }

    function renderPosts() {
      const container = document.getElementById('forumContainer');
      container.innerHTML = '<h1>General Forum</h1>'; // reset
      posts.forEach(post=>{
        const card = document.createElement('div');
        card.className = 'post-card';
        card.innerHTML = `
          ${post.title ? `<h3>${post.title}</h3>` : ''}
          ${post.date ? `<small>${post.date}</small>` : ''}
          ${post.content ? `<p>${post.content}</p>` : ''}
          <div class="post-actions">
            <button>Like</button>
            <button>Reply</button>
          </div>
        `;
        container.appendChild(card);

        // Like button
        const likeBtn = card.querySelector('button:first-child');
        let likeCount = post.likes;
        const likeDisplay = document.createElement('span');
        likeDisplay.style.marginLeft = '0.5rem';
        likeDisplay.textContent = `Likes: ${likeCount}`;
        likeBtn.parentElement.appendChild(likeDisplay);
        likeBtn.addEventListener('click', () => {
          if(!loggedIn){ showLogin(); return; }
          likeCount++;
          likeDisplay.textContent = `Likes: ${likeCount}`;
          post.likes = likeCount;
          savePosts();
        });

        // Reply button
        const replyBtn = card.querySelector('button:last-child');
        replyBtn.addEventListener('click', () => {
          if(!loggedIn){ showLogin(); return; }
          let existing = card.querySelector('.reply-box');
          if(existing){ existing.remove(); return; }
          const replyBox = document.createElement('div');
          replyBox.className = 'reply-box';
          replyBox.innerHTML = `
            <textarea rows="2"></textarea>
            <button class="submit-reply">Submit</button>
            <div class="replies" style="margin-top:0.5rem;"></div>
          `;
          card.appendChild(replyBox);

          const submitBtn = replyBox.querySelector('.submit-reply');
          submitBtn.addEventListener('click', () => {
            const text = replyBox.querySelector('textarea').value.trim();
            if(text){
              const replyDiv = document.createElement('div');
              replyDiv.textContent = text;
              replyDiv.style.marginTop = '0.3rem';
              replyDiv.style.paddingLeft = '0.5rem';
              replyDiv.style.borderLeft = '2px solid #ff6d4d';
              replyBox.querySelector('.replies').appendChild(replyDiv);
              post.replies.push(text);
              savePosts();
              replyBox.querySelector('textarea').value = '';
            }
          });

          // Load existing replies
          post.replies.forEach(r=>{
            const rDiv = document.createElement('div');
            rDiv.textContent = r;
            rDiv.style.marginTop = '0.3rem';
            rDiv.style.paddingLeft = '0.5rem';
            rDiv.style.borderLeft = '2px solid #ff6d4d';
            replyBox.querySelector('.replies').appendChild(rDiv);
          });
        });

      });
    }

    renderPosts();
  </script>
</body>
</html>
